var chatVM=new Vue({el:"#chatframe",data:{message:"",username:"",io:null},computed:{placeholder:function(){return"Press [Enter \u21b5] to send message as "+this.username}},methods:{_bold:function(a){a.style.fontWeight="bold";return a},_gray:function(a){a.style.color="gray";return a},_status:function(a){a=this._gray(a);return a=this._bold(a)},_mono:function(a){a.style.fontFamily="monospace";return a},span:function(a,c){c=void 0===c?!1:c;var b=document.createElement("span"),d=document.createTextNode(a);
c&&(b=this._mono(b));b.appendChild(d);return b},li:function(a,c,b){b=void 0===b?!1:b;var d=document.createElement("li"),e=this.span(a+": ",!0);c=this.span(c);b&&(d=this._status(d),c=this._mono(c));a==this.username&&d.setAttribute("class","my-message");d.appendChild(e);d.appendChild(c);return d},addMessage:function(a,c){var b=this.li(a,c);this.$add(b)},addSelfMessage:function(){this.addMessage(this.username,this.message);this.message=""},sendMessage:function(){this.io.emit("chat message",this.message);
this.addSelfMessage()},addStatus:function(a){a=this.li(":~Status~",a,!0);this.$add(a)},$add:function(a){this.$refs.messageDisplay.appendChild(a)},socketRegister:function(){var a=this,c=this.io;c.on("chat message",function(b){a.addMessage(b.username,b.message)});c.on("user join",function(b){a.addStatus("+ "+b+" joined the chat")});c.on("user leave",function(b){a.addStatus("- "+b+" left the chat")});c.on("user set",function(b){a.username=b})}},mounted:function(){this.io=io();this.socketRegister()}});
